% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fssm_weights.R
\name{calculate_binary_weights}
\alias{calculate_binary_weights}
\title{Calculate Binary IPW Weights}
\usage{
calculate_binary_weights(
  X_star,
  T_X,
  confounders,
  trim_quantiles = c(0.01, 0.99),
  ps_bounds = c(0.01, 0.99),
  min_complete = 10
)
}
\arguments{
\item{X_star}{Numeric vector. Latent scores (0-100 scale).}

\item{T_X}{Numeric. Threshold for dichotomization (bottleneck level).}

\item{confounders}{Data frame. Confounder variables to adjust for.}

\item{trim_quantiles}{Numeric vector of length 2. Quantiles for weight trimming.
Default c(0.01, 0.99).}

\item{ps_bounds}{Numeric vector of length 2. Bounds for propensity scores to
avoid extreme weights. Default c(0.01, 0.99).}

\item{min_complete}{Integer. Minimum complete cases required. Default 10.}
}
\value{
A list containing:
\item{weights}{Numeric vector of normalized weights (sum to 1)}
\item{diagnostics}{List with ESS, ESS ratio, model info, and balance stats}
}
\description{
Estimates Inverse Probability of Treatment Weights (IPTW) for
binary treatment indicator. Uses logistic regression to estimate propensity
scores, then computes stabilized weights.
}
\details{
The binary IPW procedure:
\enumerate{
\item Dichotomize treatment: T = 1 if X >= T_X, else 0
\item Fit logistic model: P(T=1 | Z) = logit^{-1}(Z * beta)
\item Calculate propensity score: e(Z) = predicted probability
\item Calculate stabilized weight:
\itemize{
\item Treated (T=1): w = P(T=1) / e(Z)
\item Control (T=0): w = P(T=0) / (1 - e(Z))
}
\item Trim extreme weights and normalize
}
}
\references{
Austin, P. C. (2011). An introduction to propensity score methods for reducing
the effects of confounding in observational studies.
}
